<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>StripCol</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self';
           script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com 'unsafe-inline';
           style-src 'self' https://cdn.jsdelivr.net https://fonts.googleapis.com 'unsafe-inline';
           font-src 'self' https://fonts.gstatic.com;
           img-src 'self' data:;
           connect-src 'self' ws: wss: http: https:;
           object-src 'none'">
    <link rel="icon" type="image/x-icon" href="images/icon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&family=Inconsolata:wght@400;700&display=swap"
        rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css" />


</head>

<body>
    <main id="appWorkstation">
        <!-- SYSTEM BAR (TOP) -->
        <header class="system-bar">
            <div class="system-inner">
                <div class="sys-left">
                    <div class="sys-status-group">
                        <div class="sys-indicator" id="sysHeartbeat"></div>
                        <span id="wsStatus" class="sys-badge">SYSTEM: OFFLINE</span>
                    </div>
                    <div class="sys-divider"></div>
                    <span id="linkCodeStatus" class="sys-badge info">LINK: <span
                            id="currentLinkCodeDisplay">-----</span></span>
                </div>
                <div class="sys-right">
                    <div class="sys-actions">
                        <button id="addPanelBtn" class="btn-atm-mini" title="Add Panel">
                            <span class="material-icons">add_box</span>
                        </button>
                        <button id="settingsBtn" class="btn-atm-mini" data-bs-toggle="modal"
                            data-bs-target="#settingsModal" title="Settings">
                            <span class="material-icons">terminal</span>
                        </button>
                    </div>
                    <div class="sys-divider"></div>
                    <span id="zuluTime">00:00:00</span>
                </div>
            </div>
        </header>

        <!-- MAIN DISPLAY AREA (PANES) -->
        <div class="main-layout" id="mainLayout">
        </div>
    </main>

    <!-- Settings Modal -->
    <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
        aria-modal="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title d-flex align-items-center gap-2">
                        <span class="material-icons">settings</span>
                        <span>Settings</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <div class="settings-container">
                        <!-- Sidebar / Tabs -->
                        <div class="settings-sidebar">
                            <button class="settings-tab active" data-tab="general">
                                <span class="material-icons">settings</span>
                                <span>General</span>
                            </button>
                            <button class="settings-tab" data-tab="appearance">
                                <span class="material-icons">palette</span>
                                <span>Appearance</span>
                            </button>
                            <button class="settings-tab" data-tab="network">
                                <span class="material-icons">dns</span>
                                <span>Network</span>
                            </button>
                            <button class="settings-tab" data-tab="about">
                                <span class="material-icons">info</span>
                                <span>About</span>
                            </button>
                        </div>

                        <!-- Content -->
                        <div class="settings-content">
                            <!-- General Tab -->
                            <div class="settings-pane active" id="tab-general">
                                <h6 class="settings-section-title">System</h6>
                                <div class="settings-item">
                                    <div class="settings-info">
                                        <div class="settings-label">Audio Notifications</div>
                                        <div class="settings-description">Play a sound on new aircraft arrival.</div>
                                    </div>
                                    <div class="settings-control">
                                        <div class="form-check form-switch m-0">
                                            <input class="form-check-input" type="checkbox" id="audioToggle"
                                                role="switch">
                                        </div>
                                    </div>
                                </div>

                                <h6 class="settings-section-title mt-4">Maintenance</h6>
                                <div class="settings-item">
                                    <div class="settings-info">
                                        <div class="settings-label">Auto-Cleanup</div>
                                        <div class="settings-description">Remove inactive strips automatically.</div>
                                    </div>
                                    <div class="settings-control">
                                        <div class="form-check form-switch m-0">
                                            <input class="form-check-input" type="checkbox" id="cleanupToggle"
                                                role="switch">
                                        </div>
                                    </div>
                                </div>
                                <div class="settings-item" id="cleanupTimerContainer">
                                    <div class="settings-info">
                                        <div class="settings-label">Cleanup Timeout</div>
                                        <div class="settings-description">Time (minutes) before removal.</div>
                                    </div>
                                    <div class="settings-control">
                                        <input type="number" id="cleanupMinutes" class="form-control form-control-dark"
                                            style="width: 80px;" min="1" max="60" value="15">
                                    </div>
                                </div>
                            </div>

                            <!-- Appearance Tab -->
                            <div class="settings-pane" id="tab-appearance">

                                <h6 class="settings-section-title mt-4">Clock & HUD</h6>
                                <div class="settings-item">
                                    <div class="settings-info">
                                        <div class="settings-label">Show Seconds</div>
                                        <div class="settings-description">Toggle seconds on the Zulu clock.</div>
                                    </div>
                                    <div class="settings-control">
                                        <div class="form-check form-switch m-0">
                                            <input class="form-check-input" type="checkbox" id="showSecondsToggle"
                                                role="switch">
                                        </div>
                                    </div>
                                </div>
                                <div class="settings-item">
                                    <div class="settings-info">
                                        <div class="settings-label">System Heartbeat</div>
                                        <div class="settings-description">Blinking connection indicator.</div>
                                    </div>
                                    <div class="settings-control">
                                        <div class="form-check form-switch m-0">
                                            <input class="form-check-input" type="checkbox" id="showHeartbeatToggle"
                                                role="switch">
                                        </div>
                                    </div>
                                </div>

                                <h6 class="settings-section-title mt-4">Strip Colors</h6>
                                <div class="color-grid">
                                    <div class="color-picker-group">
                                        <div class="color-label">Departure</div>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="departureColor" value="#6ee7b7">
                                        </div>
                                    </div>
                                    <div class="color-picker-group">
                                        <div class="color-label">Arrival</div>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="arrivalColor" value="#f87171">
                                        </div>
                                    </div>
                                    <div class="color-picker-group">
                                        <div class="color-label">Overfly</div>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="overflyColor" value="#fde68a">
                                        </div>
                                    </div>
                                </div>
                                <button id="resetColors" class="btn-atm-mini mt-3 w-100 py-2">
                                    <span class="material-icons me-2" style="font-size: 14px;">restart_alt</span>
                                    Reset Defaults
                                </button>
                            </div>

                            <!-- Network Tab -->
                            <div class="settings-pane" id="tab-network">
                                <h6 class="settings-section-title">Connection</h6>

                                <div class="settings-item d-block mt-3">
                                    <div class="settings-info mb-2">
                                        <div class="settings-label">Server IP</div>
                                        <div class="settings-description">The IP address your local StripCol server
                                            listens on. (Default: <code>127.0.0.1</code>)</div>
                                    </div>
                                    <input type="text" id="serverIpInput" class="form-control form-control-dark"
                                        placeholder="127.0.0.1">
                                </div>

                                <div class="settings-item d-block mt-3">
                                    <div class="settings-info mb-2">
                                        <div class="settings-label">Link Code</div>
                                        <div class="settings-description">Enter the 5-digit code generated by Euroscope
                                            (type .stripcode).
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" id="linkCodeInput"
                                            class="form-control form-control-dark text-uppercase" placeholder="ABC12"
                                            maxlength="5">
                                        <button class="btn btn-primary" type="button" id="pairBtn">Pair Now</button>
                                    </div>
                                    <div id="pairingStatus" class="mt-2" style="font-size: 11px;"></div>
                                </div>
                            </div>

                            <!-- About Tab -->
                            <div class="settings-pane" id="tab-about">
                                <div class="about-header">
                                    <img src="images/icon.png" alt="Logo" class="about-logo">
                                    <div class="about-title">StripCol</div>
                                    <div class="about-version">BETA V<span id="appVersionDisplay">1.0.1</span></div>
                                </div>

                                <div class="update-check-container mt-4 mb-4 text-center">
                                    <button id="checkUpdatesBtn" class="btn btn-atm-mini w-100 py-2">
                                        <span class="material-icons me-2" style="font-size: 16px;">update</span>
                                        Check for Updates
                                    </button>
                                    <div id="updateStatus" class="mt-2" style="font-size: 12px; min-height: 18px;">
                                    </div>
                                </div>

                                <div class="about-info-grid">
                                    <div class="about-info-label">Developer</div>
                                    <div class="about-info-value">Simplezes</div>

                                    <div class="about-info-label">License</div>
                                    <div class="about-info-value">MIT License</div>
                                </div>

                                <div class="mt-4 text-center">
                                    <p class="text-dim" style="font-size: 0.8rem;">
                                        &copy; 2026 StripCol Project. <br>
                                        Designed for Vatsim Colombia.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Libs -->
    <script src="js/libs/Sortable.min.js"></script>
    <script src="js/libs/bootstrap.bundle.min.js"></script>
    <script src="js/libs/web_socket.min.js"></script>

    <!-- Validators & State Management -->
    <script src="js/validators.js"></script>
    <script src="js/managers/state-manager.js"></script>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/panels.js"></script>
    <script src="js/strips.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/settings.js"></script>
</body>

</html>